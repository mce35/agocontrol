<div id="contentarea" class="container">

    <!-- security pin panel -->
    <div class="modal" id="pinPanel">
        <div class="content" style="width:350px;">
            <div class="row">
                <div class="four columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'1')" href="#">1</a></div>
                </div>
                <div class="four columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'2')" href="#">2</a></div>
                </div>
                <div class="four columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'3')" href="#">3</a></div>
                </div>
            </div>
            <div class="row">
                <div class="four columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'4')" href="#">4</a></div>
                </div>
                <div class="four columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'5')" href="#">5</a></div>
                </div>
                <div class="four columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'6')" href="#">6</a></div>
                </div>
            </div>
            <div class="row">
                <div class="four columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'7')" href="#">7</a></div>
                </div>
                <div class="four columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'8')" href="#">8</a></div>
                </div>
                <div class="four columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'9')" href="#">9</a></div>
                </div>
            </div>
            <div class="row">
                <div class="four columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'*')" href="#">*</a></div>
                </div>
                <div class="four columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'0')" href="#">0</a></div>
                </div>
                <div class="four columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'#')" href="#">#</a></div>
                </div>
            </div>
            <div class="row">
                <div class="twelve columns" style="text-align:center;">
                    <div class="append field">
                        <input class="narrow text input" type="password" placeholder="pin code" disabled="disabled" data-bind="value:currentPin"/>
                        <div class="medium primary btn"><a href="#" data-bind="click:resetPin">X</a></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- security tabs -->
    <_h3 data-translateable="true">Security</_h3>
    <section class="tabs" data-bind="gumbyTabs:$root">
        <ul class="tab-nav">
            <li class="active"><_a data-translateable="true" href="#">Status</_a></li>
            <li><_a data-translateable="true" href="#">Pin configuration</_a></li>
            <li><_a data-translateable="true" href="#">Housemodes/zones Configuration</_a></li>
            <li><_a data-translateable="true" href="#">Security Configuration</_a></li>
        </ul>

        <!-- status tab -->
        <div class="tab-content active">
            <div class="row">
                <div class="four columns text-right">
                    <_span data-translateable="true">Change current housemode</_span>
                </div>
                <div class="three columns text-left field">
                    <div class="picker">
                        <select data-bind="options:housemodes, optionsText:'name', optionsValue:'name', value:currentHousemode"></select>
                    </div>
                </div>
                <div class="three columns text-left field">
                    <div class="medium primary btn icon-left entypo icon-floppy">
                        <_a data-translateable="true" href="#" data-bind="click:checkPin.bind($data, setHousemode)">Save</_a>
                    </div>
                </div>
            </div>
        </div>

        <!-- pin configuration tab -->
        <div class="tab-content">
            <!-- new pin code -->
            <div class="row">
                <_span data-translateable="true">Change pin code</_span>
            </div>
            <div class="row">
                <div class="four columns"></div>
                <div class="one columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'1')" href="#">1</a></div>
                </div>
                <div class="one columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'2')" href="#">2</a></div>
                </div>
                <div class="one columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'3')" href="#">3</a></div>
                </div>
                <div class="five columns"></div>
            </div>
            <div class="row">
                <div class="four columns"></div>
                <div class="one columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'4')" href="#">4</a></div>
                </div>
                <div class="one columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'5')" href="#">5</a></div>
                </div>
                <div class="one columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'6')" href="#">6</a></div>
                </div>
                <div class="five columns"></div>
            </div>
            <div class="row">
                <div class="four columns"></div>
                <div class="one columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'7')" href="#">7</a></div>
                </div>
                <div class="one columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'8')" href="#">8</a></div>
                </div>
                <div class="one columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'9')" href="#">9</a></div>
                </div>
                <div class="five columns"></div>
            </div>
            <div class="row">
                <div class="four columns"></div>
                <div class="one columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'*')" href="#">*</a></div>
                </div>
                <div class="one columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'0')" href="#">0</a></div>
                </div>
                <div class="one columns">
                    <div class="xlarge primary btn"><a data-bind="click:keyPressed.bind($data,'#')" href="#">#</a></div>
                </div>
                <div class="five columns"></div>
            </div>
            <div class="row">
                <div class="four columns"></div>
                <div class="three columns" style="text-align:center;">
                    <div class="append field">
                        <input class="normal text input" type="password" placeholder="pin code" disabled="disabled" data-bind="value:currentPin"/>
                        <div class="medium primary btn"><a href="#" data-bind="click:resetPin">X</a></div>
                    </div>
                </div>
                <div class="five columns"></div>
            </div>
        </div>

        <!-- housemodes/zones configuration tab -->
        <div class="tab-content">
            <!-- editor -->
            <div id="housemodeEditor" class="housemode-editor">
                <div class="row">
                    <div class="six columns">
                        <i class="icon-cog"></i><_span data-translateable="true">Security devices</_span>
                        <div class="device-list security-device-list" data-bind="template: {name:listDeviceTemplate, foreach:triggerableDevices }" style="margin:0px;"></div>
                    </div>
                    <div class="six columns">
                        <i class="icon-bell"></i><_span data-translateable="true">Alarms</_span>
                        <div class="device-list security-alarm-list" data-bind="template: {name:listDeviceTemplate, foreach:alarmableDevices }" style="margin:0px;"></div>
                    </div>
                </div>
                <div class="row" style="text-align:right; margin-top:10px;">
                    <div class="medium primary btn icon-left entypo icon-floppy">
                        <_a data-translateable="true" href="#" data-bind="click:stopEditHousemode">Save</_a>
                    </div>
                    <div class="medium primary btn icon-left entypo icon-cancel-circled">
                        <_a data-translateable="true" href="#" data-bind="click:cancelEditHousemode">Cancel</_a>
                    </div>
                </div>
            </div>

            <!-- table -->
            <table class="rounded striped" id="securityTable">
            <thead>
                <tr>
                    <th>
                        <i class="icon-down-dir"></i><_span data-translateable="true">Housemodes\Zones</_span><i class="icon-right-dir"></i>
                    </th>
                    <ko opts="foreach: zones">
                    <th style="text-align:center;">
                        <span data-bind="text: name"></span>
                        <div class="small primary btn" style="margin-bottom:0px;">
                            <i data-translateable="true" data-bind="click:$parent.delZone.bind($data,name)" class="icon-cancel" _title="Delete zone" _alt="Delete zone"></i>
                        </div>
                    </th>
                    </ko>
                </tr>
            </thead>
            <tbody id="housemodesTable" data-bind="foreach: housemodes">
                <tr data-bind="attr:{'id':name}">
                    <td>
                        <span data-bind="text: name" class="housemode"></span>
                        <br/>
                        <div class="small default btn">
                            <i data-translateable="true" data-bind="click:$parent.delHousemode.bind($data,name)" class="icon-cancel" _title="Delete housemode" _alt="Delete housemode"></i>
                        </div>
                        <div class="small default btn">
                            <i data-translateable="true" data-bind="click:$parent.startEditHousemode.bind($data,name)" class="icon-pencil" _title="Edit" _alt="Edit"></i>
                        </div>
                    </td>
                    <ko opts="foreach: configs">
                    <td>
                        <div class="row">
                            <div data-translateable="true" class="one columns ttip" _data-tooltip="Delay (s)">
                                <i class="icon-hourglass"></i>
                            </div>
                            <div class="eleven columns">
                                <div class="picker" style="width:235px;">
                                    <select class="delay" disabled="disabled" style="cursor:auto;" data-bind="options:$parents[1].possibleDelays, value:$data.delay, optionsText:'label', optionsValue:'value'"></select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div data-translateable="true" class="one columns ttip" _data-tooltip="Security devices">
                                <i class="icon-cog"></i>
                            </div>
                            <div class="eleven columns">
                                <div class="housemode-item-list housemode-device-list" data-bind="template:{name:$parents[1].housemodeDevicesTemplate, foreach:$data.devices}, attr:{'data-hm':$data.hm, 'data-zn':$data.zn}"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div data-translateable="true" class="one columns ttip" _data-tooltip="Alarms">
                                <i class="icon-bell"></i>
                            </div>
                            <div class="eleven columns">
                                <div class="housemode-item-list housemode-alarm-list" data-bind="template:{name:$parents[1].housemodeDevicesTemplate, foreach:$data.alarms}, attr:{'data-hm':$data.hm, 'data-zn':$data.zn}"></div>
                            </div>
                        </div>
                    </td>
                    </ko>
                </tr>
            </tbody>
            </table>

            <!-- new housemode/zone -->
            <div class="row">
                <div class="four columns text-right field">
                    <_span data-translateable="true">Add new housemode</_span>
                </div>
                <div class="four columns text-left field">
                    <input data-translateable="true" class="normal text input" type="text" _placeholder="New housemode name" data-bind="value:newHousemode "/>
                </div>
                <div class="four columns text-left field">
                    <div class="medium primary btn">
                        <_a data-translateable="true" data-bind="click:addHousemode" href="#">Add housemode</_a>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="four columns text-right field">
                    <_span data-translateable="true">Add new zone</_span>
                </div>
                <div class="four columns text-left field">
                    <input data-translateable="true" class="normal text input" type="text" _placeholder="New zone name" data-bind="value:newZone "/>
                </div>
                <div class="four columns text-left field">
                    <div class="medium primary btn">
                        <_a data-translateable="true" data-bind="click:addZone" href="#">Add zone</_a>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="four columns text-right">
                    <ko opts="if: housemodeZoneChanged">
                        <_span data-translateable="true" style="color:red;">Don't forget to save changes</_span>!
                    </ko>
                </div>
                <div class="four columns text-left field">
                    <div class="medium primary btn">
                        <_a data-translateable="true" data-bind="click:saveNewHousemodeZone" href="#">Save</_a>
                    </div>
                </div>
            </div>
        </div>

        <!-- security config tab -->
        <div class="tab-content">
            <div class="row">
                <div class="four columns text-right field">
                    <_span data-translateable="true">Alarm message to send when alarm is armed</_span>
                </div>
                <div class="eight columns text-left field">
                    <input data-translateable="true" class="wide text input" type="text" _placeholder="message" data-bind="value:armedMessage" />
                </div>
            </div>
            <div class="row">
                <div class="four columns text-right field">
                    <_span data-translateable="true">Alarm message to send when alarm is disarmed</_span>
                </div>
                <div class="eight columns text-left field">
                    <input data-translateable="true" class="wide text input" type="text" _placeholder="message" data-bind="value:disarmedMessage"/>
                </div>
            </div>
            <div class="row">
                <div class="four columns text-right field">
                    <_span data-translateable="true">Default housemode (activated after valid pin is entered)</_span>
                </div>
                <div class="eight columns text-left field">
                    <div class="picker">
                        <select data-bind="options:housemodes, optionsText:'name', optionsValue:'name', value:defaultHousemode"></select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="four columns text-right field">
                </div>
                <div class="eight columns text-left field">
                    <div class="medium primary btn icon-left entypo icon-floppy">
                        <_a data-translateable="true" href="#" data-bind="click:checkPin.bind($data, saveConfig)">Save</_a>
                    </div>
                </div>
            </div>
        </div>

    </section>
</div>

