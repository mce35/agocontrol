<div id="contentarea" class="container">
    <div style="display:none;">
        <_span id="nr" data-translateable="true">zwavecontroller is not responding. Unable to execute action.</_span>
        <_span id="setportok" data-translateable="true">Port configured</_span>
        <_span id="resetok" data-translateable="true">Z-Wave controller resetted</_span>
        <_span id="addnodeok" data-translateable="true">Add node command sent to controller</_span>
        <_span id="removenodeok" data-translateable="true">Remove node command sent to controller</_span>
        <_span id="testnetworkok" data-translateable="true">Test network command launched</_span>
        <_span id="cancelok" data-translateable="true">Cancel command sent to controller</_span>
        <_span id="saveconfigok" data-translateable="true">Save configuration sent to controller</_span>
        <_span id="downloadconfigok" data-translateable="true">Download config sent to controller</_span>
        <_span id="allonok" data-translateable="true">Turn on all nodes command sent to controller</_span>
        <_span id="alloffok" data-translateable="true">Turn off all nodes command sent to controller</_span>
        <_span id="testnodeok" data-translateable="true">Test node command sent to controller</_span>
        <_span id="testnodeko" data-translateable="true">Test node command failed</_span>
        <_span id="healnodeok" data-translateable="true">Heal node command sent to controller</_span>
        <_span id="setconfigparamok" data-translateable="true">Parameter updated successfully</_span>
        <_span id="setconfigparamko" data-translateable="true">Unable to update parameter</_span>
        <_span id="addassociationok" data-translateable="true">Association added successfully</_span>
        <_span id="removeassociationok" data-translateable="true">Association removed successfully</_span>
        <_span id="reallyremoveassociation" data-translateable="true">Really remove this association?</_span>
        <_span id="reallyremovenode" data-translateable="true">Really remove this node?</_span>
        <_span id="reallyreset" data-translateable="true">Reset controller (everything will be lost!)</_span>
    </div>

    <h3>Z-Wave</h3>

    <!-- node details popup -->
    <div id="nodeDetails" class="modal" data-bind="gumbyModal:$root">
        <div class="content">
        <a class="close switch"><i class="icon-cancel"></i></a>
        <section data-bind="gumbyTabs:$root" class="tabs">
            <ul class="tab-nav">
                <li class="active"><_a data-translateable="true" href="#">Infos</_a></li>
                <li><_a data-translateable="true" href="#">Status</_a></li>
                <li><_a data-translateable="true" href="#">Associations</_a></li>
                <li><_a data-translateable="true" href="#">Configuration</_a></li>
                <li><_a data-translateable="true" href="#">Commands</_a></li>
            </ul>
            <!-- infos tab -->
            <div class="tab-content active">
                <style type="text/html" id="nodeInfosRowTemplate">
                    <td><span data-bind="text: info"/></td>
                    <td><span data-bind="text: value"/></td>
                </style>
                <div data-bind="agoGrid:nodeInfosGrid"/>
            </div>
            <!-- status tab -->
            <div class="tab-content">
                <style type="text/html" id="nodeStatusRowTemplate">
                    <td><span data-bind="text: status"/></td>
                    <td><span data-bind="text: value"/></td>
                </style>
                <div data-bind="agoGrid:nodeStatusGrid"/>
            </div>
            <!-- associations tab -->
            <div class="tab-content">
                <div class="row">
                    <div class="four columns text-right">
                        <_span data-translateable="true">Create new association with</_span>
                    </div>
                    <div class="four columns text-left field">
                        <div class="picker">
                            <select data-bind="options:nodesForAssociation, optionsText:'value', value:selectedNodeForAssociation"/>
                        </div>
                    </div>
                    <div class="four columns text-left field">
                        <div data-bind="click:createAssociation" class="medium primary btn"><_a style="color:white;" href="#" data-translateable="true">Create</_a>
                    </div>
                </div>
                <style type="text/html" id="nodeAssociationsRowTemplate">
                    <td><span data-bind="text: label"/></td>
                    <td>
                        <table style="width:550px; margin:0px;" class="agoTable">
                        <tbody data-bind="foreach: assos">
                        <tr data-bind="ifnot: add">
                            <td>
                                <span data-bind="text:asso"/>
                            </td>
                            <td>
                                <div class="small default btn">
                                    <i data-translateable="true" data-bind="click: $parent.removeAssociation" class="icon-cancel" _title="Delete node association" _alt="Delete node association"></i>
                                </div>
                            </td>
                        </tr>
                        <tr data-bind="if: add">
                            <td>
                                <_span data-translateable="true">Add association with</_span>
                                <select data-bind="options:targets, optionsText:'value', value:target"/>
                            </td>
                            <td>
                                <div class="small default btn">
                                    <i data-translateable="true" data-bind="click: $parent.addAssociation" class="icon-plus" _title="Add association" _alt="Add association"></i>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                        </table>
                    </td>
                </style>
                <div data-bind="agoGrid:nodeAssociationsGrid"/>
            </div>
            <!-- configuration tab -->
            <div class="tab-content">
                <script type="text/html" id="nodeParametersRowTemplate">
                    <td>
                        <ko opts="if: help.length>0">
                        <div data-bind="attr:{'data-tooltip':help}" class="ttip"><i class="icon-help-circled"/></div>
                        </ko>
                    </td>
                    <td>
                        <ko opts="if: invalid==1">
                        <div data-translateable="true" class="ttip" _data-tooltip="This parameter has something invalid. It is displayed only for information."><i style="color:red" class="icon-alert"/></div>
                        </ko>
                        <ko opts="if: type!='button'">
                            <ko opts="if: units.length==0">
                            <span data-bind="text:label"/>
                            </ko>
                            <ko opts="if: units.length>0">
                            <span data-bind="text:label+' ('+units+')'"/>
                            </ko>
                        </ko>
                    </td>
                    <td>
                        <ko opts="if: readonly==1">
                            <span data-bind="text:currentvalue"/>
                        </ko>
                        <ko opts="if: readonly==0">
                            <ko opts="if: type=='list'">
                                <select data-bind="options:items, value:currentvalue"/>
                            </ko>
                            <ko opts="if: type=='int' || type=='float' || type=='byte' || type=='short' || type=='string'">
                                <input type="text" style="width:100px;" data-bind="value:currentvalue"/>
                            </ko>
                            <ko opts="if: type=='bool'">
                                <input type="checkbox" data-bind="checked:currentvalue"/>
                            </ko>
                            <ko opts="if: type=='button'">
                                <div class="small primary btn">
                                    <a href="#" data-bind="text:label, click:function(data, event){ alert('TODO'); }"/>
                                </div>
                            </ko>
                        </ko>
                    </td>
                    <td>
                        <ko opts="if: invalid==0">
                        <div class="small primary btn">
                            <_a data-translateable="true" href="#" data-bind="click:$parent.setParameter">Set</_a>
                        </div>
                        </ko>
                    </td>
                </script>
                <div data-bind="agoGrid:nodeParametersGrid"/>
            </div>
            <!-- commands tab -->
            <div class="tab-content">
                <div class="row">
                    <div class="four columns text-right">
                        <_span data-translateable="true">Heal this node</_span>
                    </div>
                    <div class="three columns text-left field">
                        <div data-bind="event:{mousedown:healNode}" class="medium primary btn"><_a style="color:white;" href="#" data-translateable="true">Heal</_a></div>
                    </div>
                </div>
                <div class="row">
                    <div class="four columns text-right">
                        <_span data-translateable="true">Refresh node informations</_span>
                    </div>
                    <div class="three columns text-left field">
                        <div data-bind="event:{mousedown:refreshNode}" class="medium primary btn"><_a style="color:white;" href="#" data-translateable="true">Refresh</_a></div>
                    </div>
                </div>
                <div class="row">
                    <div class="four columns text-right">
                        <_span data-translateable="true">Test this node</_span>
                    </div>
                    <div class="three columns text-left field">
                        <div data-bind="event:{mousedown:testNode}" class="medium primary btn"><_a style="color:white;" href="#" data-translateable="true">Test</_a></div>
                    </div>
                </div>
                <div class="row">
                    <div class="four columns text-right">
                        <_span data-translateable="true">Remove this node from network</_span>
                    </div>
                    <div class="three columns text-left field">
                        <div data-bind="event:{mousedown:removeNode}" class="medium primary btn"><_a style="color:white;" href="#" data-translateable="true">Remove</_a></div>
                    </div>
                </div>
                <div class="row">
                    <div class="four columns text-right">
                        <_span data-translateable="true">Request node configuration parameters</_span>
                    </div>
                    <div class="three columns text-left field">
                        <div data-bind="event:{mousedown:requestAllConfigParams}" class="medium primary btn"><_a style="color:white;" href="#" data-translateable="true" data-bind="click:$root.noclick">Request parameters</_a></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        </div>
    </div>

    <!-- main tabs -->
    <section data-bind="gumbyTabs:$root" class="tabs">
        <ul class="tab-nav">
            <li class="active"><_a href="#" data-translateable="true">Devices</_a></li>
            <li><_a href="#" data-translateable="true">Dependencies</_a></li>
            <li><_a href="#" data-translateable="true">Statistics</_a></li>
            <li><_a href="#" data-translateable="true">General commands</_a></li>
            <li><_a href="#" data-translateable="true">USB port</_a></li>
        </ul>
        <!-- device list -->
        <div class="tab-content active">
            <style type="text/html" id="nodesRowTemplate">
                <td data-bind="text: id"/>
                <td>
                    <a href="#" data-bind="click: function(data,event) { $parent.openNodeDetails($index()); }">
                    <ko opts="if: product.length>0">
                        <span data-bind="text: manufacturer+' ('+product+')'"/>
                    </ko>
                    <ko opts="if: product.length==0 and manufacturer.length>0">
                        <span data-bind="text: manufacturer"/>
                    </ko>
                    <ko opts="if: product.length==0 and manufacturer.length==0">
                        <span style="font-style:italic;">No name</span>
                    </ko>
                    </a>
                </td>
                <td data-bind="text: type"/>
                <ko opts="if: status.awake==1">
                <td>
                    <_span data-translateable="true">True</_span>
                </td>
                </ko>
                <ko opts="if: status.awake==0">
                <td>
                    <_span data-translateable="true">False</_span>
                </td>
                </ko>
                <ko opts="if: status.failed==1">
                <td>
                    <_span style="color:red;" data-translateable="true">True</_span>
                </td>
                </ko>
                <ko opts="if: status.failed==0">
                <td>
                    <_span data-translateable="true">False</_span>
                </td>
                </ko>
            </style>
            <div data-bind="agoGrid:nodesGrid"/>
        </div>
        <!-- dependencies -->
        <div class="tab-content">
            <div style="width:1100px; height:1100px;" id="nodesDependency"/>
        </div>
        <!-- statistics -->
        <div class="tab-content">
            <script type="text/html" id="statsRowTemplate">
                <td data-bind="text: stat"/>
                <td data-bind="text: value"/>
            </script>
            <div data-bind="agoGrid:statsGrid"/>
        </div>
        <!-- general commands -->
        <div class="tab-content">
            <div class="row">
                <div class="four columns text-right">
                    <_span data-translateable="true">Pair/unpair node to your network</_span>
                </div>
                <div class="three columns text-left field">
                   <div data-bind="event:{mousedown:addNode}" class="medium primary btn"><_a href="#" data-translateable="true">Pair</_a></div>
                   <div data-bind="event:{mousedown:removeNode}" class="medium primary btn"><_a href="#" data-translateable="true">Unpair</_a></div>
                </div>
            </div>
            <div class="row">
                <div class="four columns text-right">
                    <_span data-translateable="true">Turn on/off all devices</_span>
                </div>
                <div class="three columns text-left field">
                    <div data-bind="event:{mousedown:allOn}" class="medium primary btn"><_a href="#" data-translateable="true">On</_a></div>
                    <div data-bind="event:{mousedown:allOff}" class="medium primary btn"><_a href="#" data-translateable="true">Off</_a></div>
                </div>
            </div>
            <div class="row">
                <div class="four columns text-right">
                    <_span data-translateable="true">Test network</_span>
                </div>
                <div class="three columns text-left field">
                    <div data-bind="event:{mousedown:testNetwork}" class="medium primary btn"><_a href="#" data-translateable="true">Test</_a></div>
                </div>
            </div>
            <div class="row">
                <div class="four columns text-right">
                    <_span data-translateable="true">Heal network</_span>
                </div>
                <div class="three columns text-left field">
                    <div data-bind="event:{mousedown:healNetwork}" class="medium primary btn"><_a href="#" data-translateable="true" data-bind="click:$root.noclick">Heal network</_a></div>
                </div>
            </div>
            <div class="row">
                <div class="four columns text-right">
                    <_span data-translateable="true">Cancel running controller command</_span>
                </div>
                <div class="three columns text-left field">
                    <div data-bind="event:{mousedown:cancel}" class="medium primary btn"><_a href="#" data-translateable="true">Cancel</_a></div>
                </div>
            </div>
            <div class="row">
                <div class="four columns text-right">
                    <_span data-translateable="true">Reset controller</_span>
                </div>
                <div class="three columns text-left field">
                    <div data-bind="event:{mousedown:reset}" class="medium primary btn"><_a href="#" data-translateable="true">Reset</_a></div>
                </div>
            </div>
            <div class="row">
                <div class="four columns text-right">
                    <_span data-translateable="true">Download configuration</_span>
                </div>
                <div class="three columns text-left field">
                    <div data-bind="event:{mousedown:downloadConfig}" class="medium primary btn"><_a href="#" data-translateable="true">Download</_a></div>
                </div>
            </div>
            <div class="row">
                <div class="four columns text-right">
                    <_span data-translateable="true">Save configuration</_span>
                </div>
                <div class="three columns text-left field">
                    <div data-bind="event:{mousedown:saveConfig}" class="medium primary btn"><_a href="#" data-translateable="true">Save</_a></div>
                </div>
            </div>
        </div>
        <!-- usb port -->
        <div class="tab-content">
            <div class="row">
                <div class="four columns text-right">
                    <_span data-translateable="true">Configure controller USB port</_span>
                </div>
                <div class="three columns text-left field">
                    <input type="text" placeholder="/dev/ttyACM0" id="setport" data-bind="value: port" class="xwide text input"/>
                </div>
                <div class="three columns text-left">
                    <div data-bind="event:{mousedown:setPort}" class="medium primary btn"><_a href="#" data-translateable="true">Set</_a></div>
                </div>
            </div>
        </div>
    </section>

</div>

